<div class="table-container">
    <h2>User Table</h2>

    <div class="controls">
        <label>
            Rows per page:
            <select (change)="onPerPageChange($event)">
                @for (opt of perPageOptions; track opt) {
                <option [value]="opt" [selected]="opt === perPage">
                    {{ opt }}
                </option>
                }
            </select>
        </label>
    </div>

    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Avatar</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
            </tr>
        </thead>
        @if (users.length === 0) {
            <tr>
                <td colspan="5">No users found.</td>
            </tr>
        }
        <tbody>
            @for (user of users; track user.id) {
                <tr>
                  <td>{{ user.id }}</td>
                  <td><img [src]="user.avatar" /></td>
                  <td>{{ user.first_name }}</td>
                  <td>{{ user.last_name }}</td>
                  <td>{{ user.email }}</td>
                </tr>
              }
        </tbody>
    </table>

    <div class="pagination">
        @for (page of getPageNumbers(); track page) {
            <button
            [class.active]="page === currentPage"
            (click)="changePage(page)">
            {{ page }}
            </button>
        }
    </div>
</div>
